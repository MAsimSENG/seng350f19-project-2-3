<<<<<<< HEAD
<<<<<<< HEAD
{"version":3,"file":"shoeRouter.js","sourceRoot":"","sources":["../../../src/routes/shoeRouter.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response, Router} from \"express\";\nimport Shoes = require(\"../../dist/data.json\");\nimport { BaseRoute } from \"./router\";\nimport DbClient = require(\"../DbClient\");\nimport { user_model } from \"../models/user_model\";\n\nexport class ShoeRouter extends BaseRoute {\n    public static create(router: Router) {\n        // log\n        console.log(\"[ShoeRoute::create] Creating ShoeRoutes route.\");\n\n        // add home page route\n        router.get(\"/user/:id/shoes\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().getAll(req, res, next);\n        });\n\n        // add getOne route\n        router.get(\"/user/:id/shoes/:id2\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().getOne(req, res, next);\n        });\n\n        router.get(\"/api/sortpricelow\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().sortPriceLow(req, res, next);\n        });\n\n        router.get(\"/api/sortpricehigh\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().sortPriceHigh(req, res, next);\n        });\n\n    }\n\n    // constructor() {\n        // not much here yet\n    // }\n\n    public sortPriceLow(req: Request, res: Response, next: NextFunction) {\n        const shoes: any[] = [];\n        Shoes.forEach((element: any) => {\n            shoes.push(JSON.parse(JSON.stringify(element)));\n        });\n        shoes.sort((a, b) => a.current_price - b.current_price);\n        console.log(shoes);\n        this.render(req, res, \"allShoes\", {title: \"Shoes\", data: shoes});\n\n    }\n\n    public sortPriceHigh(req: Request, res: Response, next: NextFunction) {\n        const shoes: any[] = [];\n        Shoes.forEach((element: any) => {\n            shoes.push(JSON.parse(JSON.stringify(element)));\n        });\n        shoes.sort((a, b) => b.current_price - a.current_price);\n        console.log(shoes);\n        this.render(req, res, \"allShoes\", {title: \"Shoes\", data: shoes});\n\n    }\n\n    /**\n     * GET all Shoes.\n     */\n    public async getAll(req: Request, res: Response, next: NextFunction) {\n            const idString = \"id\";\n            const queryint = parseInt(req.params[idString], 10);\n            const yeet = new user_model();\n            const shoes = await yeet.get_all(queryint);\n            console.log(shoes);\n            if(shoes.length != 0) {\n                res.send(shoes);\n            }\n            else res.send(\"404 not found lol\");\n           /* DbClient.connect()\n            .then((db) => {\n                return db!.collection(\"users\").find().toArray();\n            })\n            .then((sneakers:any) => {\n                console.log(sneakers);\n                res.send(sneakers);\n            })\n            .catch((err) => {\n                console.log(\"err.message\");\n            })\n            // res.send(Shoes);\n            /* const shoeArray: any[] = [];\n            Shoes.forEach((element: any) => {\n                shoeArray.push(JSON.parse(JSON.stringify(element)));\n            });\n            console.log(shoeArray);\n            this.render(req, res, \"allShoes\", {title: \"Shoes\", data: shoeArray}); */\n    }\n\n    /**\n     * GET one shoe by id\n     */\n    public getOne(req: Request, res: Response, next: NextFunction) {\n        const idString = \"id\";\n        const queryint = parseInt(req.params[idString], 10);\n        let shoe: any = Shoes[1];\n        for (const item in Shoes) {\n            if (Shoes.hasOwnProperty(item)) {\n                const shoeid: number = Shoes[item].id;\n                if (shoeid === queryint) {\n                    shoe = Shoes[item];\n                }\n            }\n        }\n        if (shoe) {\n            const diff = \"diff\";\n            shoe[diff] = shoe.current_price - shoe.retail_price;\n            this.render(req, res, \"oneShoe\", shoe);\n            /* res.status(200)\n                .send({\n                    message: 'Success',\n                    status: res.status,\n                    shoe\n                }); */\n        } else {\n            res.status(404)\n                .send({\n                    message: \"No shoe found with the given id.\",\n                    status: res.status,\n                });\n        }\n\n    }\n\n}\n"]}
=======
{"version":3,"file":"shoeRouter.js","sourceRoot":"","sources":["../../../src/routes/shoeRouter.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response, Router} from \"express\";\nimport Shoes = require(\"../../dist/data.json\");\nimport { BaseRoute } from \"./router\";\nimport DbClient = require(\"../DbClient\");\nimport { user_model } from \"../models/user_model\";\nimport shoe_model from \"../models/shoe_model\";\n\nexport class ShoeRouter extends BaseRoute {\n    public static create(router: Router) {\n        // log\n        console.log(\"[ShoeRoute::create] Creating ShoeRoutes route.\");\n\n\n        // all shoses of a user\n        router.get(\"/user/:id/shoes\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().getAll_sho(req, res, next);\n        });\n\n        // add home page route\n      /*  router.get(\"/user/:id/shoes\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().getAll(req, res, next);\n        });\n*/\n        // add getOne route\n        router.get(\"/user/:id/shoes/:id2\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().getOne(req, res, next);\n        });\n\n        router.get(\"/api/sortpricelow\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().sortPriceLow(req, res, next);\n        });\n\n        router.get(\"/api/sortpricehigh\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().sortPriceHigh(req, res, next);\n        });\n\n    }\n\n    // constructor() {\n        // not much here yet\n    // }\n\n    public sortPriceLow(req: Request, res: Response, next: NextFunction) {\n        const shoes: any[] = [];\n        Shoes.forEach((element: any) => {\n            shoes.push(JSON.parse(JSON.stringify(element)));\n        });\n        shoes.sort((a, b) => a.current_price - b.current_price);\n        console.log(shoes);\n        this.render(req, res, \"allShoes\", {title: \"Shoes\", data: shoes});\n\n    }\n\n    public sortPriceHigh(req: Request, res: Response, next: NextFunction) {\n        const shoes: any[] = [];\n        Shoes.forEach((element: any) => {\n            shoes.push(JSON.parse(JSON.stringify(element)));\n        });\n        shoes.sort((a, b) => b.current_price - a.current_price);\n        console.log(shoes);\n        this.render(req, res, \"allShoes\", {title: \"Shoes\", data: shoes});\n\n    }\n\n    public async getAll_sho(req: Request, res: Response, next: NextFunction) {\n        console.log(\"hello in get all\")\n        const yeet = new shoe_model();\n       // let test_arr = [{\"1\":300},{ \"3\":400},{\"5\":500}]\n        let shoe = await yeet.get_one_shoe(\"3\");\n       // let shoes = await yeet.get_all_shoes(test_arr);\n\n        if(shoe.length != 0) {\n            res.send(shoe);\n        }\n        else res.send(\"404 not found lol\");\n\n    }\n\n\n    /**\n     * GET all Shoes. Take user id from the url parameter. Then get all shoes for that user.\n     */\n    public async getAll(req: Request, res: Response, next: NextFunction) {\n        console.log(\"in ther other one\")\n            const idString = \"id\";\n            const queryint = parseInt(req.params[idString], 10);\n            const yeet = new user_model();\n            const shoes = await yeet.get_all(queryint);\n\n            console.log(shoes);\n            if(shoes.length != 0) {\n                res.send(shoes);\n            }\n            else res.send(\"404 not found lol\");\n\n    }\n\n    /**\n     * GET one shoe by id\n     */\n    public getOne(req: Request, res: Response, next: NextFunction) {\n        const idString = \"id\";\n        const queryint = parseInt(req.params[idString], 10);\n        let shoe: any = Shoes[1];\n        for (const item in Shoes) {\n            if (Shoes.hasOwnProperty(item)) {\n                const shoeid: number = Shoes[item].id;\n                if (shoeid === queryint) {\n                    shoe = Shoes[item];\n                }\n            }\n        }\n        if (shoe) {\n            const diff = \"diff\";\n            shoe[diff] = shoe.current_price - shoe.retail_price;\n            this.render(req, res, \"oneShoe\", shoe);\n            /* res.status(200)\n                .send({\n                    message: 'Success',\n                    status: res.status,\n                    shoe\n                }); */\n        } else {\n            res.status(404)\n                .send({\n                    message: \"No shoe found with the given id.\",\n                    status: res.status,\n                });\n        }\n\n    }\n\n}\n"]}
>>>>>>> dev_wip
=======
{"version":3,"file":"shoeRouter.js","sourceRoot":"","sources":["../../../src/routes/shoeRouter.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response, Router} from \"express\";\nimport { BaseRoute } from \"./router\";\nimport { user_model } from \"../models/user_model\";\nimport { shoe_model } from \"../models/shoe_model\";\nlet user_json:any;\nlet user_shoes:any;\n\nexport class ShoeRouter extends BaseRoute {\n\n    public static create(router: Router) {\n        // log\n        console.log(\"[ShoeRoute::create] Creating ShoeRoutes route.\");\n\n        // add home page route\n        router.get(\"/user/:id/shoes\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().getAll(req, res, next);\n        });\n\n        // add getOne route\n        router.get(\"/user/:id/shoes/:id2\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().getOne(req, res, next);\n        });\n\n        router.get(\"/user/:id/shoes/sort/price_low\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().sortPriceLow(req, res, next);\n        });\n\n        router.get(\"/user/:id/shoes/sort/price_high\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().sortPriceHigh(req, res, next);\n        });\n\n        router.get(\"/user/:id/add_shoes\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().addShoe(req, res, next);\n        });\n\n        router.get(\"/user/:id/notifications\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().notificationCentre(req, res, next);\n        });\n\n    }\n\n    // constructor() {\n        // not much here yet\n    // }\n\n    public async notificationCentre(req: Request, res: Response, next: NextFunction) {\n        const idString = \"id\";\n        const user_id = parseInt(req.params[idString], 10);\n        this.render(req, res, \"notificationCentre\", {id: user_id, title: \"Shoes\"});\n    }\n\n    public async addShoe(req: Request, res: Response, next: NextFunction) {\n        const idString = \"id\";\n        const user_id = parseInt(req.params[idString], 10);\n        const shoe_if = new shoe_model();\n        const all_shoes = await shoe_if.get_all();\n        this.render(req, res, \"addShoes\", {id: user_id, title: \"Shoes\", data: all_shoes});\n    }\n\n    public async sortPriceLow(req: Request, res: Response, next: NextFunction) {\n        const idString = \"id\";\n        const queryint = parseInt(req.params[idString], 10);\n        console.log(user_shoes);\n        const sorted_shoes:any = user_shoes;\n        console.log(sorted_shoes);\n        sorted_shoes.sort((a:any, b:any) => a.current_price - b.current_price);\n        if (sorted_shoes.length != 0) {\n            console.log(sorted_shoes);\n            this.render(req, res, \"allShoes\", {id: queryint, username:user_json.username, title: \"Shoes\", data: sorted_shoes});\n        }\n        else res.send(\"this user has no shoes\");\n    }\n\n    public async sortPriceHigh(req: Request, res: Response, next: NextFunction) {\n        const idString = \"id\";\n        const queryint = parseInt(req.params[idString], 10);\n        console.log(user_shoes);\n        const sorted_shoes:any = user_shoes;\n        console.log(sorted_shoes);\n        sorted_shoes.sort((a:any, b:any) => b.current_price - a.current_price);\n        if (sorted_shoes.length != 0) {\n            console.log(sorted_shoes);\n            this.render(req, res, \"allShoes\", {id: queryint, username:user_json.username, title: \"Shoes\", data: sorted_shoes});\n        }\n        else res.send(\"this user has no shoes\");\n    }\n\n    /**\n     * GET all Shoes.\n     */\n    public async getAll(req: Request, res: Response, next: NextFunction) {\n            const idString = \"id\";\n            const queryint = parseInt(req.params[idString], 10);\n            user_json = await this.get_user_info(queryint);\n            user_shoes = await this.get_user_shoes(user_json);\n            console.log(\"Here's the user info lol: \" + user_json);\n            console.log(\"Here's the shoes lol: \" + user_shoes);\n            if(user_shoes) {\n                this.render(req, res, \"allShoes\", {id: queryint, title: \"Shoes\", username: user_json.username, data: user_shoes});\n            }\n            else res.send(\"404 not found lol\");\n           /* DbClient.connect()\n            .then((db) => {\n                return db!.collection(\"users\").find().toArray();\n            })\n            .then((sneakers:any) => {\n                console.log(sneakers);\n                res.send(sneakers);\n            })\n            .catch((err) => {\n                console.log(\"err.message\");\n            })\n            // res.send(Shoes);\n            /* const shoeArray: any[] = [];\n            Shoes.forEach((element: any) => {\n                shoeArray.push(JSON.parse(JSON.stringify(element)));\n            });\n            console.log(shoeArray); */\n\n    }\n\n    /**\n     * GET one shoe by id\n     */\n    public async getOne(req: Request, res: Response, next: NextFunction) {\n        const shoe_if = new shoe_model();\n        const user_id_string = \"id\";\n        const user_id = parseInt(req.params[user_id_string], 10);\n        const shoe_id_string = \"id2\";\n        const shoe_id = parseInt(req.params[shoe_id_string], 10);\n        const purchase = this.get_purchase_price(user_json.shoelist, shoe_id);\n        console.log(purchase);\n        console.log(shoe_id, user_id);\n        const shoe = await shoe_if.get_one_shoe(shoe_id);\n        if (shoe) {\n            const diff = shoe.current_price - purchase;\n            this.render(req, res, \"oneShoe\", {id:user_json.user_id, diff:diff, purchase:purchase, shoe:shoe});\n            /* res.status(200)\n                .send({\n                    message: 'Success',\n                    status: res.status,\n                    shoe\n                }); */\n        } else {\n            res.status(404)\n                .send({\n                    message: \"No shoe found with the given id.\",\n                    status: res.status,\n                });\n        }\n\n    }\n\n    private get_purchase_price(user_shoes:any, id:number) {\n        let purchase = 0;\n        for (const item in user_shoes) {\n            if (user_shoes.hasOwnProperty(item)) {\n                const shoeid: number = user_shoes[item].shoe_id;\n                if (shoeid === id) {\n                    purchase = user_shoes[item].purchase_price;\n                }\n            }\n        }\n        return purchase;\n    }\n\n    private async get_user_info(queryint:number) {\n        const user_if = new user_model();\n        const user_info = await user_if.get_all(queryint);\n        const user_json = JSON.parse(JSON.stringify(user_info[0]));\n        return user_json;\n    }\n\n    private async get_user_shoes(user_json:any){\n        const shoe_if = new shoe_model();\n        const user_shoes =  await shoe_if.get_all_shoes(user_json.shoelist);\n        return user_shoes;\n    }\n\n}\n"]}
>>>>>>> shaun
