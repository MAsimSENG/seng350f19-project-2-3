{"version":3,"file":"shoeRouter.js","sourceRoot":"","sources":["../../../src/routes/shoeRouter.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response, Router} from \"express\";\nimport DbClient = require(\"../DbClient\");\nimport { ShoeModel } from \"../models/shoe_model\";\nimport { UserModel } from \"../models/user_model\";\nimport { BaseRoute } from \"./router\";\n\nlet userJson: any;\nlet userKeys: any;\nlet userShoes: any[] = [];\nlet netGain: number = 0;\nlet sunkCost: number = 0;\nlet totalRevenue: number = 0;\nlet Shoes: any;\n\nexport class ShoeRouter extends BaseRoute {\n\n    public static create(router: Router) {\n        // users home page showing all the shoes the user owns\n        router.get(\"/user/:id/shoes\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().getAll(req, res, next);\n        });\n        // showing a specific shoe that the user owns\n        router.get(\"/user/:id/shoes/:id2\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().getOne(req, res, next);\n        });\n        // sorting all the shoes the user owns from low to high\n        router.get(\"/user/:id/shoes/sort/price_low\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().sortPriceLow(req, res, next);\n        });\n        // sorting the shoes the user owns from high to low\n        router.get(\"/user/:id/shoes/sort/price_high\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().sortPriceHigh(req, res, next);\n        });\n\n\n\n        router.get(\"/user/:id/add_shoe/:id2\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().inputShoe(req, res, next);\n        });\n\n        router.post(\"/user/:id/add_shoe/:id2\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().addShoe(req, res, next);\n        });\n\n        router.post(\"/user/:id/remove_shoe/:id2\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().removeShoe(req, res, next);\n        });\n    }\n\n\n\n    public async removeShoe(req: Request, res: Response, next: NextFunction) {\n        const userIdString = \"id\";\n        const userId = parseInt(req.params[userIdString], 10);\n        if (!(await this.check_local(userId))) {\n            res.status(404)\n                .send({\n                    message: \"No user with associated ID. Check the entered number.\",\n                    status: res.status,\n                });\n        }\n        const idString = \"id2\";\n        const docID = req.params[idString];\n        const uif = new UserModel();\n        await uif.remove_shoe(docID);\n        res.redirect(\"/user/\" + userId + \"/shoes/\");\n    }\n\n\n\n\n    public async addShoe(req: Request, res: Response, next: NextFunction) {\n        const userIdString = \"id\";\n        const userId = parseInt(req.params[userIdString], 10);\n        const shoeIdString = \"id2\";\n        const shoeId = parseInt(req.params[shoeIdString], 10);\n        if (await this.check_local(userId)) {\n            const uif = new UserModel();\n            let price = req.body.purchase_price;\n            if (!price) {\n                price = 0;\n            }\n            await uif.add_shoe(userId, shoeId, price);\n            res.redirect(\"/user/\" + userId + \"/shoes/\");\n        } else {\n            res.status(404)\n            .send({\n                message: \"No user with associated ID. Check the entered number.\",\n                status: res.status,\n            });\n            res.send(\"invalid user\");\n\n        }\n    }\n\n    public async inputShoe(req: Request, res: Response, next: NextFunction) {\n        const userIdString = \"id\";\n        const userId = parseInt(req.params[userIdString], 10);\n        const shoeIdString = \"id2\";\n        const shoeId = parseInt(req.params[shoeIdString], 10);\n        const shoe = await this.getShoe(shoeId);\n        if (shoe) {\n            this.render(req, res, \"addShoe\", {id: userId, shoe});\n\n        } else {\n            res.status(404)\n                .send({\n                    message: \"No shoe found with the given id.\",\n                    status: res.status,\n                });\n        }\n\n    }\n\n    public async sortPriceLow(req: Request, res: Response, next: NextFunction) {\n        const idString = \"id\";\n        const queryint = parseInt(req.params[idString], 10);\n        if (await this.check_local(queryint)) {\n            const sortedShoes: any = userShoes;\n            sortedShoes.sort((a: any, b: any) => a.current_price - b.current_price);\n            this.render(req, res, \"allShoes\",\n                {id: queryint, username: userJson.username, title: \"Shoes\", data: sortedShoes, net: netGain,\n                total: totalRevenue, sunk: sunkCost});\n        } else {\n            res.status(404);\n            res.send(\"invalid user\");\n        }\n\n    }\n\n    public async sortPriceHigh(req: Request, res: Response, next: NextFunction) {\n        const idString = \"id\";\n        const queryint = parseInt(req.params[idString], 10);\n        if (await this.check_local(queryint)) {\n            const sortedShoes: any = userShoes;\n            sortedShoes.sort((a: any, b: any) => b.current_price - a.current_price);\n            this.render(req, res, \"allShoes\",\n                {id: queryint, username: userJson.username, title: \"Shoes\", data: sortedShoes, net: netGain,\n                total: totalRevenue, sunk: sunkCost});\n        } else {\n            res.status(404);\n            res.send(\"invalid user\");\n        }\n\n    }\n\n    /**\n     * GET all Shoes. Take user id from the url parameter. Then get all shoes for that user.\n     */\n    public async getAll(req: Request, res: Response, next: NextFunction) {\n        const idString = \"id\";\n        const queryint = parseInt(req.params[idString], 10);\n        userShoes = [];\n        netGain = 0;\n        sunkCost = 0;\n        totalRevenue = 0;\n        userJson = await this.getUserInfo(queryint);\n        if (userJson) {\n            userKeys = await this.getUserKeys(queryint);\n            await this.setUserShoes(userKeys);\n            await this.setNet(userShoes);\n            console.log(userShoes);\n            console.log(netGain);\n            this.render(req, res, \"allShoes\",\n                {id: queryint, title: \"Shoes\", username: userJson.username, data: userShoes,\n                    net: netGain, sunk: sunkCost, total:totalRevenue, keys: userKeys});\n        } else {\n            res.status(404)\n                .send({\n                    message: \"No user found with the given id.\",\n                    status: res.status,\n                });\n        }\n    }\n\n    /**\n     * GET one shoe by id\n     */\n\n    public async getOne(req: Request, res: Response, next: NextFunction) {\n        const userIdString = \"id\";\n        const userId = parseInt(req.params[userIdString], 10);\n        const shoeIdString = \"id2\";\n        const shoeId = req.params[shoeIdString];\n        if (await this.check_local(userId)) {\n            const shoe = this.findShoe(shoeId);\n            if (shoe) {\n                const diff = shoe.current_price - shoe.purchase_price;\n                this.render(req, res, \"oneShoe\", {id: userId, diff, purchase:shoe.purchase_price, shoe});\n            } else {\n                res.status(404)\n                    .send({\n                        message: \"No shoe found with the given id.\",\n                        status: res.status,\n                    });\n            }\n        } else {\n            res.status(404)\n                .send({\n                    message: \"No user found with the given id.\",\n                    status: res.status,\n                });\n        }\n\n    }\n\n    private getShoeInfo(shoeID:number) {\n        for (const item in Shoes) {\n            if (Shoes.hasOwnProperty(item)) {\n                const shoe = Shoes[item];\n                if (shoe.shoe_id === shoeID) return shoe;\n            }\n        }\n    }\n\n    private findShoe(shoeID: any) {\n        console.log(shoeID);\n        for (const item in userShoes) {\n            if (userShoes.hasOwnProperty(item)) {\n                const shoe = userShoes[item];\n                if (shoe._id == shoeID) return shoe;\n            }\n        }\n    }\n\n    private async check_local(userID: number) {\n        if (!(userJson && userShoes)) {\n            userJson = await this.getUserInfo(userID);\n            if (!userJson) {\n                return false;\n            }\n            console.log(\"setting shoes\");\n            userKeys = await this.getUserKeys(userID);\n            await this.setUserShoes(userKeys);\n            await this.setNet(userShoes);\n            return true;\n        }\n        else if (userJson.user_id != userID) {\n            userJson = await this.getUserInfo(userID);\n            if (!userJson) {\n                return false;\n            }\n            userShoes = [];\n            netGain = 0;\n            sunkCost = 0;\n            totalRevenue = 0;\n            userKeys = await this.getUserKeys(userID);\n            await this.setUserShoes(userKeys);\n            await this.setNet(userShoes);\n            return true;\n        }\n\n        return true;\n    }\n\n    private async setUserShoes(userKeys: any) {\n        Shoes = await this.getAllDbShoes();\n        for (const item in userKeys) {\n            if (userKeys.hasOwnProperty(item)) {\n                const key = userKeys[item];\n                const shoe = this.getShoeInfo(key.shoe_id);\n                key[\"name\"] = shoe.brand + ' ' + shoe.model + ' ' + shoe.colorway;\n                key[\"size\"] = shoe.size;\n                key[\"current_price\"] = shoe.current_price;\n                key[\"retail_price\"] = shoe.retail_price;\n                userShoes.push(key);\n            }\n        }\n    }\n\n    private async getUserKeys(userID: any) {\n        const user_if = new UserModel();\n        const userKeys:any = await user_if.get_keys(userID);\n        console.log(userKeys);\n        return userKeys;\n    }\n\n    private has_shoe(userShoes: any, shoeID: number) {\n        for (const item in userShoes) {\n            if (userShoes.hasOwnProperty(item)) {\n                const shoeid: number = userShoes[item].shoe_id;\n                if (shoeid === shoeID) {\n                   return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    private getPurchasePrice(id: number) {\n        let purchase = 0;\n        for (const item in userShoes) {\n            if (userShoes.hasOwnProperty(item)) {\n                const shoeid: number = userKeys[item].shoe_id;\n                if (shoeid === id) {\n                    purchase = userKeys[item].purchase_price;\n                }\n            }\n        }\n        return purchase;\n    }\n\n    private async getUserInfo(queryint: number) {\n        const userIf = new UserModel();\n        let userInfo = null;\n        try {\n            userInfo = await userIf.userInfo(queryint);\n        } catch {\n            return false;\n        }\n        if (userInfo.length !== 0) {\n            return userInfo[0];\n        } else {\n            return false;\n        }\n    }\n\n    private async getUserShoes(userKeys: any) {\n        const shoeIf = new ShoeModel();\n        const uShoes = await shoeIf.getAllShoes(userKeys);\n        return uShoes;\n    }\n\n    private async getShoe(shoeId: number) {\n        const shoeIf = new ShoeModel();\n        const shoe = await shoeIf.getOneShoe(shoeId);\n        if (shoe) {\n            return shoe;\n        } else {\n            return;\n        }\n    }\n\n    private async setNet(shoelist: any) {\n        for (const item in shoelist) {\n            if (shoelist.hasOwnProperty(item)) {\n                const shoe = shoelist[item];\n                netGain = netGain + shoe.current_price - shoe.purchase_price;\n                sunkCost = sunkCost + parseInt(shoe.purchase_price);\n                totalRevenue = totalRevenue + shoe.current_price;\n            }\n        }\n    }\n\n    /* returns every shoe in db */\n    private async getAllDbShoes() {\n        let allShoes = null;\n        const shoeIf = new ShoeModel();\n        try {\n            allShoes = await shoeIf.getAllDB();\n        } catch {\n            return false;\n        }\n        if (allShoes) {\n            return allShoes;\n        }\n        return;\n    }\n\n}\n"]}