{"version":3,"file":"shoeRouter.js","sourceRoot":"","sources":["../../../src/routes/shoeRouter.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response, Router} from \"express\";\r\nimport DbClient = require(\"../DbClient\");\r\nimport { ShoeModel } from \"../models/shoe_model\";\r\nimport { UserModel } from \"../models/user_model\";\r\nimport { BaseRoute } from \"./router\";\r\n\r\nlet userJson: any;\r\nlet userShoes: any;\r\n\r\nexport class ShoeRouter extends BaseRoute {\r\n\r\n    public static create(router: Router) {\r\n        // log\r\n        console.log(\"[ShoeRoute::create] Creating ShoeRoutes route.\");\r\n        // users home page showing all the shoes the user owns\r\n        router.get(\"/user/:id/shoes\", (req: Request, res: Response, next: NextFunction) => {\r\n            new ShoeRouter().getAll(req, res, next);\r\n        });\r\n        // showing a specific shoe that the user owns\r\n        router.get(\"/user/:id/shoes/:id2\", (req: Request, res: Response, next: NextFunction) => {\r\n            new ShoeRouter().getOne(req, res, next);\r\n        });\r\n        // sorting all the shoes the user owns from low to high\r\n        router.get(\"/user/:id/shoes/sort/price_low\", (req: Request, res: Response, next: NextFunction) => {\r\n            new ShoeRouter().sortPriceLow(req, res, next);\r\n        });\r\n        // sorting the shoes the user owns from high to low\r\n        router.get(\"/user/:id/shoes/sort/price_high\", (req: Request, res: Response, next: NextFunction) => {\r\n            new ShoeRouter().sortPriceHigh(req, res, next);\r\n        });\r\n\r\n        // show all shoes from db\r\n        router.get(\"/user/:id/allShoes\", (req: Request, res: Response, next: NextFunction) => {\r\n            new ShoeRouter().allShoe(req, res, next);\r\n        });\r\n\r\n        // show all shoes sorted from high to low\r\n        router.get(\"/user/:id/allShoes/sort/price_high\", (req: Request, res: Response, next: NextFunction) => {\r\n            new ShoeRouter().sortPriceHigh(req, res, next);\r\n        });\r\n\r\n        // show all shoes sorted from low to high\r\n\r\n        router.get(\"/user/:id/allShoes/sort/price_low\", (req: Request, res: Response, next: NextFunction) => {\r\n            new ShoeRouter().sortPriceLow(req, res, next);\r\n        });\r\n\r\n        router.get(\"/user/:id/notifications\", (req: Request, res: Response, next: NextFunction) => {\r\n            new ShoeRouter().notificationCentre(req, res, next);\r\n        });\r\n\r\n        router.get(\"/user/:id/add_shoe/:id2\", (req: Request, res: Response, next: NextFunction) => {\r\n            new ShoeRouter().inputShoe(req, res, next);\r\n        });\r\n\r\n        router.post(\"/user/:id/add_shoe/:id2\", (req: Request, res: Response, next: NextFunction) => {\r\n            new ShoeRouter().addShoe(req, res, next);\r\n        });\r\n\r\n        router.post(\"/user/:id/remove_shoe/:id2\", (req: Request, res: Response, next: NextFunction) => {\r\n            new ShoeRouter().removeShoe(req, res, next);\r\n        });\r\n\r\n\r\n    }\r\n\r\n    // constructor() {\r\n        // not much here yet\r\n    // }\r\n\r\n    public async notificationCentre(req: Request, res: Response, next: NextFunction) {\r\n        const idString = \"id\";\r\n        const userId = parseInt(req.params[idString], 10);\r\n        this.render(req, res, \"notificationCentre\", {id: userId, title: \"Shoes\"});\r\n    }\r\n\r\n    public async removeShoe(req:Request, res:Response, next:NextFunction) {\r\n        const userIdString = \"id\";\r\n        const userId = parseInt(req.params[userIdString], 10);\r\n        const shoeIdString = \"id2\";\r\n        const shoeId = parseInt(req.params[shoeIdString], 10);\r\n        const uif = new UserModel();\r\n        await uif.remove_shoe(userId, shoeId);\r\n        res.redirect('/user/' + userId + '/shoes/');\r\n    }\r\n\r\n    // get all the shoes from the db\r\n    public async allShoe(req: Request, res: Response, next: NextFunction) {\r\n        const idString = \"id\";\r\n        const userId = parseInt(req.params[idString], 10);\r\n        const shoeIf = new ShoeModel();\r\n        const allShoes = await shoeIf.get_all_db();\r\n        this.render(req, res, \"shoeList\", {id: userId, title: \"Shoes\", data: allShoes});\r\n    }\r\n\r\n    public async addShoe(req: Request, res: Response, next: NextFunction) {\r\n        console.log(req.body.purchase_price);\r\n        const userIdString = \"id\";\r\n        const userId = parseInt(req.params[userIdString], 10);\r\n        const shoeIdString = \"id2\";\r\n        const shoeId = parseInt(req.params[shoeIdString], 10);\r\n        if (await this.check_local(userId)) {\r\n            if (this.has_shoe(userShoes,shoeId)) {\r\n                //res.send(\"boi whatchu trynna do\");\r\n                res.redirect('/user/' + userId + '/allShoes/');\r\n            }\r\n            else {\r\n                const uif = new UserModel();\r\n                let price = req.body.purchase_price;\r\n                if (!price) {\r\n                    price = 0;\r\n                }\r\n                await uif.add_shoe(userId,shoeId,price);\r\n                res.redirect('/user/' + userId + '/shoes/');\r\n            }\r\n        }\r\n        else res.send(\"invalid user\");\r\n\r\n    }\r\n\r\n    public async inputShoe(req: Request, res: Response, next: NextFunction) {\r\n        const userIdString = \"id\";\r\n        const userId = parseInt(req.params[userIdString], 10);\r\n        const shoeIdString = \"id2\";\r\n        const shoeId = parseInt(req.params[shoeIdString], 10);\r\n        const shoe = await this.getShoe(shoeId);\r\n        if (shoe) {\r\n            this.render(req, res, \"addShoe\", {id: userId, shoe: shoe});\r\n            /* res.status(200)\r\n                .send({\r\n                    message: 'Success',\r\n                    status: res.status,\r\n                    shoe\r\n                }); */\r\n        } else {\r\n            res.status(404)\r\n                .send({\r\n                    message: \"No shoe found with the given id.\",\r\n                    status: res.status,\r\n                });\r\n        }\r\n\r\n    }\r\n\r\n    public async sortPriceLow(req: Request, res: Response, next: NextFunction) {\r\n        const idString = \"id\";\r\n        const queryint = parseInt(req.params[idString], 10);\r\n        if (await this.check_local(queryint)) {\r\n            console.log(userShoes);\r\n            const sorted_shoes: any = userShoes;\r\n            console.log(sorted_shoes);\r\n            sorted_shoes.sort((a: any, b: any) => a.current_price - b.current_price);\r\n            console.log(sorted_shoes);\r\n            this.render(req, res, \"allShoes\", {id: queryint, username: userJson.username, title: \"Shoes\", data: sorted_shoes});\r\n        }\r\n        else res.send(\"invalid user\");\r\n\r\n    }\r\n\r\n    public async sortPriceHigh(req: Request, res: Response, next: NextFunction) {\r\n        const idString = \"id\";\r\n        const queryint = parseInt(req.params[idString], 10);\r\n        if (await this.check_local(queryint)) {\r\n            console.log(userShoes);\r\n            const sorted_shoes:any = userShoes;\r\n            console.log(sorted_shoes);\r\n            sorted_shoes.sort((a: any, b: any) => b.current_price - a.current_price);\r\n            this.render(req, res, \"allShoes\", {id: queryint, username: userJson.username, title: \"Shoes\", data: sorted_shoes});\r\n        }\r\n        else res.send(\"invalid user\");\r\n\r\n    }\r\n\r\n    /**\r\n     * GET all Shoes. Take user id from the url parameter. Then get all shoes for that user.\r\n     */\r\n    public async getAll(req: Request, res: Response, next: NextFunction) {\r\n        const idString = \"id\";\r\n        const queryint = parseInt(req.params[idString], 10);\r\n\r\n        userJson = await this.getUserInfo(queryint);\r\n        console.log(userJson);\r\n        if (userJson) {\r\n            userShoes = await this.getUserShoes(userJson);\r\n            console.log(\"Here's the user info: \" + userJson);\r\n            console.log(\"Here's the shoes: \" + userShoes);\r\n            this.render(req, res, \"allShoes\", {id: queryint, title: \"Shoes\", username: userJson.username, data: userShoes});\r\n        }\r\n        else res.status(404)\r\n            .send({\r\n                message: \"No user found with the given id.\",\r\n                status: res.status,\r\n            });\r\n        /* DbClient.connect()\r\n        .then((db) => {\r\n            return db!.collection(\"users\").find().toArray();\r\n        })\r\n        .then((sneakers:any) => {\r\n            console.log(sneakers);\r\n            res.send(sneakers);\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"err.message\");\r\n        })\r\n        // res.send(Shoes);\r\n        /* const shoeArray: any[] = [];\r\n        Shoes.forEach((element: any) => {\r\n            shoeArray.push(JSON.parse(JSON.stringify(element)));\r\n        });\r\n        console.log(shoeArray); */\r\n    }\r\n\r\n    /**\r\n     * GET one shoe by id\r\n     */\r\n\r\n    public async getOne(req: Request, res: Response, next: NextFunction) {\r\n        const userIdString = \"id\";\r\n        const userId = parseInt(req.params[userIdString], 10);\r\n        const shoeIdString = \"id2\";\r\n        const shoeId = parseInt(req.params[shoeIdString], 10);\r\n        if (await this.check_local(userId)) {\r\n            const purchase = this.getPurchasePrice(userJson.shoelist, shoeId);\r\n            console.log(purchase);\r\n            console.log(shoeId, userId);\r\n            const shoe = await this.getShoe(shoeId);\r\n            if (shoe) {\r\n                const diff = shoe.current_price - purchase;\r\n                this.render(req, res, \"oneShoe\", {id: userId, diff, purchase:purchase, shoe});\r\n                /* res.status(200)\r\n                    .send({\r\n                        message: 'Success',\r\n                        status: res.status,\r\n                        shoe\r\n                    }); */\r\n            } else {\r\n                res.status(404)\r\n                    .send({\r\n                        message: \"No shoe found with the given id.\",\r\n                        status: res.status,\r\n                    });\r\n            }\r\n        }\r\n        else res.send(\"oof\");\r\n\r\n    }\r\n\r\n    private async check_local(userID:number) {\r\n        if (!(userJson || userShoes)) {\r\n            userJson = await this.getUserInfo(userID);\r\n            if (userJson) {\r\n                userShoes = await this.getUserShoes(userJson);\r\n                return true\r\n            }\r\n            else return false;\r\n        }\r\n        else if (userJson.userId != userID) {\r\n            userJson = await this.getUserInfo(userID);\r\n            if (userJson) {\r\n                userShoes = await this.getUserShoes(userJson);\r\n                return true\r\n            }\r\n            else return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private has_shoe(userShoes:any, shoeID:number) {\r\n        for (let shoe of userShoes) {\r\n            console.log(shoe.shoeId, shoeID);\r\n            if (shoe.shoeId == shoeID){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private getPurchasePrice(userShoes: any, id: number) {\r\n        let purchase = 0;\r\n        for (const item in userShoes) {\r\n            if (userShoes.hasOwnProperty(item)) {\r\n                const shoeid: number = userShoes[item].shoeId;\r\n                if (shoeid === id) {\r\n                    purchase = userShoes[item].purchase_price;\r\n                }\r\n            }\r\n        }\r\n        return purchase;\r\n    }\r\n\r\n    private async getUserInfo(queryint: number) {\r\n        const user_if = new UserModel();\r\n        const user_info = await user_if.get_all(queryint);\r\n        console.log(user_info);\r\n        if (user_info.length != 0) {\r\n            return JSON.parse(JSON.stringify(user_info[0]));\r\n        }\r\n        else return;\r\n    }\r\n\r\n    private async getUserShoes(userJson: any) {\r\n        const shoeIf = new ShoeModel();\r\n        const uShoes = await shoeIf.getAllShoes(userJson.shoelist);\r\n        return uShoes;\r\n    }\r\n\r\n    private async getShoe(shoeId: number) {\r\n        const shoeIf = new ShoeModel();\r\n        const shoe = await shoeIf.getOneShoe(shoeId);\r\n        if (shoe) {\r\n            return shoe;\r\n        }\r\n        else return;\r\n    }\r\n\r\n}\r\n"]}