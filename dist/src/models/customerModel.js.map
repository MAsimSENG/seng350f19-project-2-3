{"version":3,"file":"customerModel.js","sourceRoot":"","sources":["../../../src/models/customerModel.ts"],"names":[],"mappings":"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","sourcesContent":["import mongodb = require(\"mongodb\");\nimport DbClient = require(\"../DbClient\");\n\nconst ObjectID: any = mongodb.ObjectID;\n\nexport class CustomerModel {\n\n    constructor() {}\n\n    public userInfo(userId: number) {\n        const users = DbClient.connect()\n            .then((db) => {\n                return db!.collection(\"users\").find({user_id: userId}).toArray();\n            })\n            .then((sneakers: any) => {\n                return sneakers;\n            })\n            .catch((err) => {\n                console.log(\"Grabbing user info from the database has failed\");\n            });\n\n        return users;\n    }\n\n    public add_shoe(userId: any, shoeID: number, purchase: number) {\n        const shoeAdd = DbClient.connect()\n            .then((db) => {\n                db!.collection(\"user_shoes\").insertOne({user_id: userId, shoe_id: shoeID, purchase_price: purchase});\n                return true;\n            })\n            .catch((err) => {\n                console.log(\"Adding a shoe to the database has failed\");\n                return false;\n            });\n        return shoeAdd;\n    }\n\n    public edit_shoe(id: any, purchasePrice: number) {\n        const result = DbClient.connect()\n            .then((db) => {\n                db!.collection(\"user_shoes\").updateOne({_id: ObjectID(id)},\n                    {$set: {purchase_price: purchasePrice}});\n                return true;\n            })\n            .catch((err) => {\n                console.log(\"Editing a shoe in the database has failed\");\n                return false;\n            });\n        return result;\n    }\n\n    public remove_shoe(id: any) {\n        const shoeRemove = DbClient.connect()\n            .then((db) => {\n                db!.collection(\"user_shoes\").deleteOne({_id: ObjectID(id)});\n                return true;\n            })\n            .catch((err) => {\n                console.log(\"Removing a shoe from the database has failed\");\n                return false;\n            });\n        return shoeRemove;\n    }\n\n    public isUser(userID: any) {\n        const result = DbClient.connect()\n            .then((db) => {\n                return db!.collection(\"users\").find({user_id: userID}).toArray();\n            })\n            .then((value: any) => {\n                if (value.length === 0) {\n                    return false;\n                } else {\n                    return true;\n                }\n            })\n            .catch((err) => {\n                console.log(\"Confirmation of user has failed\");\n            });\n        return result;\n    }\n\n    public getKeys(userID: any) {\n        const userKeys = DbClient.connect()\n            .then((db) => {\n                return db!.collection(\"user_shoes\").find({user_id: userID}).toArray();\n            })\n            .then((sneakers: any) => {\n                return sneakers;\n            })\n            .catch((err) => {\n                console.log(\"Getting user keys has failed\");\n            });\n        return userKeys;\n    }\n\n    public get_users() {\n        const users = DbClient.connect()\n            .then((db) => {\n                return db!.collection(\"users\").find().toArray();\n            })\n            .then((sneakers: any) => {\n                return sneakers;\n            })\n            .catch((err) => {\n                console.log(\"Getting user array has failed\");\n            });\n        return users;\n    }\n\n    public get_all_keys() {\n        const userKeys = DbClient.connect()\n            .then((db) => {\n                return db!.collection(\"user_shoes\").find().toArray();\n            })\n            .then((sneakers: any) => {\n                return sneakers;\n            })\n            .catch((err) => {\n                console.log(\"Getting key array has failed\");\n            });\n        return userKeys;\n    }\n\n    public edit_userName(id: any, editedName: any) {\n        const result = DbClient.connect()\n            .then((db) => {\n                db!.collection(\"users\").updateOne({user_id: id},\n                    {$set: {username: editedName}});\n                return true;\n            })\n            .catch((err) => {\n                console.log(\"Editing the user name has failed\");\n                return false;\n            });\n        return result;\n    }\n\n    public add_user(userId: number, username: any) {\n        const addUser = DbClient.connect()\n            .then((db) => {\n                db!.collection(\"users\").insertOne({ isAdmin: false, user_id: userId, username});\n                return true;\n            })\n            .catch((err) => {\n                console.log(\"Adding the user has failed\");\n                return false;\n            });\n        return addUser;\n    }\n\n    public remove_user(userId: any) {\n        const removeUser = DbClient.connect()\n            .then((db) => {\n                db!.collection(\"users\").deleteOne({ user_id: userId});\n                db!.collection(\"user_shoes\").deleteMany({ user_id: userId});\n                db!.collection(\"notifications\").deleteMany({ user_id: userId});\n                return true;\n            })\n            .catch((err) => {\n                console.log(\"Removing the user has failed\");\n                return false;\n            });\n        return removeUser;\n    }\n\n}\n"]}
