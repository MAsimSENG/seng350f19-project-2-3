{"version":3,"file":"notificationModel.js","sourceRoot":"","sources":["../../../src/models/notificationModel.ts"],"names":[],"mappings":"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","sourcesContent":["import DbClient = require(\"../DbClient\");\r\nconst ObjectID = require(\"mongodb\").ObjectID;\r\n\r\nexport class NotificationModel {\r\n\r\n    constructor() {}\r\n\r\n    public getUserNotifications(userId: any) {\r\n        const notifications = DbClient.connect()\r\n            .then((db) => {\r\n                return db!.collection(\"notifications\").find({user_id: userId}).toArray();\r\n            })\r\n            .then((notif: any) => {\r\n                // console.log(sneakers);\r\n                return notif;\r\n                // res.send(sneakers);\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"err.message\");\r\n            });\r\n\r\n        // console.log(users);\r\n\r\n        return notifications;\r\n    }\r\n\r\n    public fulfill(Id: any) {\r\n        const result = DbClient.connect()\r\n            .then((db) => {\r\n                db!.collection(\"notifications\").updateOne({_id: ObjectID(Id)},{$set:{fulfilled:true}});\r\n                return true;\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"err.message\");\r\n                return false;\r\n            });\r\n\r\n        // console.log(users);\r\n\r\n        return result;\r\n    }\r\n\r\n    public add_notif(user_id: number, shoe_id: number, threshold: any, type: any) {\r\n        const nAdd = DbClient.connect()\r\n            .then((db) => {\r\n                db!.collection(\"notifications\").insertOne({user_id: user_id,\r\n                    shoe_id: shoe_id, threshold: threshold, type: type, fulfilled: false});\r\n                return true;\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"err.message\");\r\n                return false;\r\n            });\r\n        return nAdd;\r\n    }\r\n\r\n    public remove_notif(id: any) {\r\n        const nRemove = DbClient.connect()\r\n            .then((db) => {\r\n                db!.collection(\"notifications\").deleteOne({_id: ObjectID(id)});\r\n                return true;\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"err.message\");\r\n                return false;\r\n            });\r\n        return nRemove;\r\n    }\r\n\r\n    public get_notif(id: any) {\r\n        const notification = DbClient.connect()\r\n            .then((db) => {\r\n                return db!.collection(\"notifications\").find({_id: ObjectID(id)}).toArray();\r\n            })\r\n            .then((notif: any) => {\r\n                // console.log(sneakers);\r\n                return notif;\r\n                // res.send(sneakers);\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"err.message\");\r\n            });\r\n        return notification;\r\n    }\r\n\r\n    public edit_notif(id: any, threshold:any, type: any) {\r\n        const result = DbClient.connect()\r\n            .then((db) => {\r\n                db!.collection(\"notifications\").updateOne({_id: ObjectID(id)},\r\n                    {$set:{threshold:threshold, type:type, fulfilled:false}});\r\n                return true;\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"err.message\");\r\n                return false;\r\n            });\r\n        return result;\r\n    }\r\n}\r\n"]}