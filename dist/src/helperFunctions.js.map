{"version":3,"file":"helperFunctions.js","sourceRoot":"","sources":["../../src/helperFunctions.ts"],"names":[],"mappings":"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","sourcesContent":["import { UserModel } from \"../src/models/user_model\"\r\nimport { ShoeModel } from \"../src/models/shoe_model\";\r\n\r\nlet userJson: any;\r\nlet userKeys: any;\r\nlet userShoes: any[] = [];\r\nlet netGain: number = 0;\r\nlet sunkCost: number = 0;\r\nlet totalRevenue: number = 0;\r\nlet Shoes: any;\r\n\r\nclass helpers {\r\n\r\n    public async check_local(userID: number) {\r\n        if (!(userJson && userShoes)) {\r\n            userJson = await this.getUserInfo(userID);\r\n            if (!userJson) {\r\n                return false;\r\n            }\r\n            console.log(\"setting shoes\");\r\n            userKeys = await this.getUserKeys(userID);\r\n            await this.setUserShoes(userKeys);\r\n            await this.setNet(userShoes);\r\n            return true;\r\n        }\r\n        else if (userJson.user_id != userID) {\r\n            userJson = await this.getUserInfo(userID);\r\n            if (!userJson) {\r\n                return false;\r\n            }\r\n            userShoes = [];\r\n            netGain = 0;\r\n            sunkCost = 0;\r\n            totalRevenue = 0;\r\n            userKeys = await this.getUserKeys(userID);\r\n            await this.setUserShoes(userKeys);\r\n            await this.setNet(userShoes);\r\n            return true;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    public async setUserShoes(userKeys: any) {\r\n        Shoes = await this.getAllDbShoes();\r\n        for (const item in userKeys) {\r\n            if (userKeys.hasOwnProperty(item)) {\r\n                const key = userKeys[item];\r\n                const shoe = this.getShoeInfo(key.shoe_id);\r\n                key[\"name\"] = shoe.brand + ' ' + shoe.model + ' ' + shoe.colorway;\r\n                key[\"size\"] = shoe.size;\r\n                key[\"current_price\"] = shoe.current_price;\r\n                key[\"retail_price\"] = shoe.retail_price;\r\n                userShoes.push(key);\r\n            }\r\n        }\r\n    }\r\n\r\n    public async getUserInfo(queryint: number) {\r\n        const userIf = new UserModel();\r\n        let userInfo = null;\r\n        try {\r\n            userInfo = await userIf.userInfo(queryint);\r\n        } catch {\r\n            return false;\r\n        }\r\n        if (userInfo.length !== 0) {\r\n            return userInfo[0];\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public async setNet(shoelist: any) {\r\n        for (const item in shoelist) {\r\n            if (shoelist.hasOwnProperty(item)) {\r\n                const shoe = shoelist[item];\r\n                netGain = netGain + shoe.current_price - shoe.purchase_price;\r\n                sunkCost = sunkCost + parseInt(shoe.purchase_price);\r\n                totalRevenue = totalRevenue + shoe.current_price;\r\n            }\r\n        }\r\n    }\r\n\r\n    public getShoeInfo(shoeID:number) {\r\n        for (const item in Shoes) {\r\n            if (Shoes.hasOwnProperty(item)) {\r\n                const shoe = Shoes[item];\r\n                if (shoe.shoe_id === shoeID) return shoe;\r\n            }\r\n        }\r\n    }\r\n\r\n    public async getUserKeys(userID: any) {\r\n        const user_if = new UserModel();\r\n        const userKeys:any = await user_if.get_keys(userID);\r\n        console.log(userKeys);\r\n        return userKeys;\r\n    }\r\n\r\n    /* returns every shoe in db */\r\n    public async getAllDbShoes() {\r\n        let allShoes = null;\r\n        const shoeIf = new ShoeModel();\r\n        try {\r\n            allShoes = await shoeIf.getAllDB();\r\n        } catch {\r\n            return false;\r\n        }\r\n        if (allShoes) {\r\n            return allShoes;\r\n        }\r\n        return;\r\n    }\r\n\r\n}\r\n\r\nexport = new helpers();\r\n"]}