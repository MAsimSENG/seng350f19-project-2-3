{"version":3,"file":"cron.js","sourceRoot":"","sources":["../../src/cron.ts"],"names":[],"mappings":";;AAAA,sDAAqD;AAErD,IAAM,IAAI,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AAClC,IAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AAEzB,kBAAkB;AAClB,IAAM,UAAU,GAAG,IAAI,2BAAY,EAAE,CAAC;AACtC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,UAAC,GAAQ;IAChC,IAAI,GAAG,EAAE;QACL,MAAM,GAAG,CAAC;KACb;IACD,IAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;IACxB,IAAI,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE;QAC3B,EAAE,CAAC,UAAU,CAAC,cAAc,EACxB,IAAI,CAAC,cAAc,EAAE,GAAG,6CAA6C,EAAE,UAAC,GAAQ;YAC5E,IAAI,GAAG,EAAE;gBACL,MAAM,GAAG,CAAC;aACb;QACT,CAAC,CAAC,CAAC;KACN;SAAM;QACH,EAAE,CAAC,UAAU,CAAC,cAAc,EACxB,IAAI,CAAC,cAAc,EAAE,GAAG,2CAA2C,EAAE,UAAC,GAAQ;YAC1E,IAAI,GAAG,EAAE;gBACL,MAAM,GAAG,CAAC;aACb;QACT,CAAC,CAAC,CAAC;KACN;AACL,CAAC,CAAC,CAAC;AAEH,4CAA4C;AAC5C,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;IACzB,EAAE,CAAC,MAAM,CAAC,cAAc,EAAE,UAAC,GAAQ;QAC/B,IAAI,GAAG,EAAE;YACL,MAAM,GAAG,CAAC;SACb;IACL,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,IAAI,CAAC,cAAc,EAAE,UAAC,GAAQ;QAC7B,IAAI,GAAG,EAAE;YACL,MAAM,GAAG,CAAC;SACb;QACD,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;IACxD,CAAC,CAAC,CAAC;AAEP,CAAC,CAAC,CAAC","sourcesContent":["import { ProductModel } from \"./models/productModel\";\n\nconst cron = require(\"node-cron\");\nconst fs = require(\"fs\");\n\n// Start cron jobs\nconst shoeUpdate = new ProductModel();\ncron.schedule(\"* * * * *\", (err: any) => {\n    if (err) {\n        throw err;\n    }\n    const date = new Date();\n    if (shoeUpdate.updateShoes(2)) {\n        fs.appendFile(\"./update.log\",\n            date.toLocaleString() + \" --- Updated all shoes by $2 successfully\\n\", (err: any) => {\n                if (err) {\n                    throw err;\n                }\n        });\n    } else {\n        fs.appendFile(\"./update.log\",\n            date.toLocaleString() + \" --- FAILED TO UPDATE SHOES ***********\\n\", (err: any) => {\n                if (err) {\n                    throw err;\n                }\n        });\n    }\n});\n\n// Renew update.log. Done every sunday night\ncron.schedule(\"59 23 * * 0\", () => {\n    fs.unlink(\"./update.log\", (err: any) => {\n        if (err) {\n            throw err;\n        }\n    });\n    fs.link(\"./update.log\", (err: any) => {\n        if (err) {\n            throw err;\n        }\n        console.log(\"Update file successfully re-created!\");\n    });\n\n});\n"]}