<<<<<<< HEAD
{"version":3,"file":"adminController.js","sourceRoot":"","sources":["../../../src/controllers/adminController.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response, Router} from \"express\";\nimport Helpers = require(\"../helperFunctions\");\nimport { CustomerModel } from \"../models/customerModel\";\nimport { NotificationModel } from \"../models/notificationModel\";\nimport { ProductModel } from \"../models/productModel\";\nimport { BaseRoute } from \"../routes/router\";\n\nexport class AdminController extends BaseRoute {\n\n    public static create(router: Router) {\n        router.get(\"/admin\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().showAdmin(req, res, next);\n        });\n\n\n        router.get(\"/admin/users\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().showAllUsers(req, res, next);\n        });\n\n        router.get(\"/admin/shoes\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().showAllShoes(req, res, next);\n        });\n\n        // edit user\n        router.get(\"/admin/users/edit_user/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().editUserForm(req, res, next);\n        });\n\n        // edit shoe\n        router.get(\"/admin/shoes/edit_shoe/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().editShoeForm(req, res, next);\n        });\n\n\n\n        router.post(\"/admin/shoes/edit_shoe/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().editShoe(req, res, next);\n        });\n\n        router.post(\"/admin/users/edit_user/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().editUser(req, res, next);\n        });\n\n        router.post(\"/admin/users/add_user\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().addUser(req, res, next);\n        });\n\n        router.post(\"/admin/shoes/add_shoe\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().addShoe(req, res, next);\n        });\n\n        router.post(\"/admin/users/del_user/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().delUser(req, res, next);\n        });\n\n        router.post(\"/admin/shoes/del_shoe/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().delShoe(req, res, next);\n        });\n\n\n    }\n\n    public async showAdmin(req: Request, res: Response, next: NextFunction) {\n        this.render(req, res, \"admin\", { title: \"Admin\"});\n    }\n\n    /*\n    Shows all users in the db in a list.\n     */\n\n    public async showAllUsers(req: Request, res: Response, next: NextFunction) {\n        let userArr: any[] = [];\n        userArr = await Helpers.getUsers();\n        this.render(req, res, \"admin_user\", {users: userArr, title: \"All users\"});\n    }\n\n\n    public async showAllShoes(req: Request, res: Response, next: NextFunction) {\n        let shoeArr: any[] = [];\n        shoeArr = await Helpers.getAllDbShoes();\n        this.render(req, res, \"admin_shoes\", {shoes: shoeArr, title: \"All shoes\"});\n    }\n    public async editUserForm(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const userID = uString;\n        let CM = new CustomerModel();\n        let user = await CM.userInfo(userID);\n        user = user[0];\n        this.render(req, res, \"editUser\", {user: user, title: \"Edit User\"});\n    }\n\n\n    public async editUser(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const userID = uString\n        let CM = new CustomerModel();\n\n        let editedName:any = req.body.editedusername;\n        console.log(editedName + userID)\n        await CM.edit_userName(userID, editedName);\n        res.redirect('/admin/users');\n\n    }\n\n    public async addUser(req: Request, res: Response, next: NextFunction) {\n        let CM = new CustomerModel();\n        let editedName:any = req.body.newusername;\n        let newID:any = req.body.newuserid;\n        console.log(\"this is new id\",newID);\n        await CM.add_user(newID,editedName);\n        res.redirect('/admin/users');\n\n\n    }\n\n    public async delUser(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const userID = uString;\n        let CM = new CustomerModel();\n        await CM.remove_user(userID);\n        res.redirect('/admin/users');\n\n\n    }\n\n\n    public async addShoe(req: Request, res: Response, next: NextFunction) {\n        let CM = new CustomerModel();\n        let shoeModel, shoeCP, shoeRP,shoeid, shoeSize,brand,colorway: any;\n\n        shoeModel = req.body.model;\n        colorway = req.body.colorway;\n        brand = req.body.brand;\n        shoeCP = req.body.current_price;\n        shoeRP = req.body.retail_price;\n        shoeSize = req.body.size;\n        shoeid = req.body.id;\n\n        let pm:any = new ProductModel();\n        await pm.add_shoe(shoeModel,shoeid, shoeSize, shoeCP, shoeRP,brand,colorway);\n        res.redirect('/admin/shoes');\n\n\n    }\n\n    public async editShoeForm(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const shoeID = req.params[uString];\n        let PM = new ProductModel();\n        console.log(\"this id\",shoeID)\n        let shoe = await PM.getOneShoe(shoeID);\n        console.log(\"this shoe\",shoe);\n        this.render(req, res, \"editShoe\", {shoe: shoe, title: \"Edit shoe\"});\n    }\n\n\n\n    public async editShoe(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const shoeID = req.params[uString];\n        let PM = new ProductModel();\n\n        let shoeModel, shoeCP, shoeRP,shoeid, shoeSize,brand,colorway: any;\n\n        shoeModel = req.body.model;\n        colorway = req.body.colorway;\n        brand = req.body.brand;\n        shoeCP = req.body.current_price;\n        shoeRP = req.body.retail_price;\n        shoeSize = req.body.size;\n        await PM.edit_shoe(shoeModel,shoeID, shoeSize, shoeCP, shoeRP,brand,colorway);\n        res.redirect('/admin/shoes');\n\n    }\n\n    public async delShoe(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const shoeID = req.params[uString];\n        let PM = new ProductModel();\n        await PM.remove_shoe(shoeID);\n        res.redirect('/admin/shoes');\n\n\n    }\n\n\n}\n"]}
=======
{"version":3,"file":"adminController.js","sourceRoot":"","sources":["../../../src/controllers/adminController.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response, Router} from \"express\";\nimport Helpers = require(\"../helperFunctions\");\nimport { CustomerModel } from \"../models/customerModel\";\nimport { NotificationModel } from \"../models/notificationModel\";\nimport { ProductModel } from \"../models/productModel\";\nimport { BaseRoute } from \"../routes/router\";\n\nexport class AdminController extends BaseRoute {\n\n    public static create(router: Router) {\n        router.get(\"/admin\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().showAdmin(req, res, next);\n        });\n\n\n        router.get(\"/admin/users\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().showAllUsers(req, res, next);\n        });\n\n        router.get(\"/admin/shoes\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().showAllShoes(req, res, next);\n        });\n\n        // edit user\n        router.get(\"/admin/users/edit_user/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().editUserForm(req, res, next);\n        });\n\n        // edit shoe\n        router.get(\"/admin/shoes/edit_shoe/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().editShoeForm(req, res, next);\n        });\n\n\n\n        router.post(\"/admin/shoes/edit_shoe/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().editShoe(req, res, next);\n        });\n\n        router.post(\"/admin/users/edit_user/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().editUser(req, res, next);\n        });\n\n        router.post(\"/admin/users/add_user\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().addUser(req, res, next);\n        });\n\n        router.post(\"/admin/shoes/add_shoe\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().addShoe(req, res, next);\n        });\n\n        router.post(\"/admin/users/del_user/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().delUser(req, res, next);\n        });\n\n        router.post(\"/admin/shoes/del_shoe/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().delShoe(req, res, next);\n        });\n\n\n    }\n\n    public async showAdmin(req: Request, res: Response, next: NextFunction) {\n        this.render(req, res, \"admin\", { title: \"Admin\"});\n    }\n\n    /*\n    Shows all users in the db in a list.\n     */\n\n    public async showAllUsers(req: Request, res: Response, next: NextFunction) {\n        let userArr: any[] = [];\n        userArr = await Helpers.getUsers();\n        this.render(req, res, \"admin_user\", {users: userArr, title: \"All users\"});\n    }\n\n\n    public async showAllShoes(req: Request, res: Response, next: NextFunction) {\n        let shoeArr: any[] = [];\n        shoeArr = await Helpers.getAllDbShoes();\n        this.render(req, res, \"admin_shoes\", {shoes: shoeArr, title: \"All shoes\"});\n    }\n    public async editUserForm(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const userID = uString;\n        let CM = new CustomerModel();\n        let user = await CM.userInfo(userID);\n        user = user[0];\n        this.render(req, res, \"editUser\", {user: user, title: \"Edit User\"});\n    }\n\n\n    public async editUser(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const userID = uString\n        let CM = new CustomerModel();\n\n        let editedName:any = req.body.editedusername;\n        console.log(editedName + userID)\n        await CM.edit_userName(userID, editedName);\n        res.redirect('/admin/users');\n\n    }\n\n    public async addUser(req: Request, res: Response, next: NextFunction) {\n        let CM = new CustomerModel();\n        let editedName:any = req.body.newusername;\n        let newID:any = req.body.newuserid;\n        console.log(\"this is new id\",newID);\n        await CM.add_user(newID,editedName);\n        res.redirect('/admin/users');\n\n\n    }\n\n    public async delUser(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const userID = uString;\n        let CM = new CustomerModel();\n        await CM.remove_user(userID);\n        res.redirect('/admin/users');\n\n\n    }\n\n\n    public async addShoe(req: Request, res: Response, next: NextFunction) {\n        let CM = new CustomerModel();\n        let shoeModel, shoeCP, shoeRP,shoeid, shoeSize,brand,colorway: any;\n\n        shoeModel = req.body.model;\n        colorway = req.body.colorway;\n        brand = req.body.brand;\n        shoeCP = req.body.current_price;\n        shoeRP = req.body.retail_price;\n        shoeSize = (req.body.size);\n        shoeid = req.body.id;\n\n        let pm:any = new ProductModel();\n        await pm.add_shoe(shoeModel,shoeid, shoeSize, shoeCP, shoeRP,brand,colorway);\n        res.redirect('/admin/shoes');\n\n\n    }\n\n    public async editShoeForm(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const shoeID = req.params[uString];\n        let PM = new ProductModel();\n        console.log(\"this id\",shoeID)\n        let shoe = await PM.getOneShoe(shoeID);\n        console.log(\"this shoe\",shoe);\n        this.render(req, res, \"editShoe\", {shoe: shoe, title: \"Edit shoe\"});\n    }\n\n\n\n    public async editShoe(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const shoeID = req.params[uString];\n        let PM = new ProductModel();\n\n        let shoeModel, shoeCP, shoeRP,shoeid, shoeSize,brand,colorway: any;\n\n        shoeModel = req.body.model;\n        colorway = req.body.colorway;\n        brand = req.body.brand;\n        shoeCP = req.body.current_price;\n        shoeRP = req.body.retail_price;\n        shoeSize = req.body.size;\n        await PM.edit_shoe(shoeModel,shoeID, shoeSize, shoeCP, shoeRP,brand,colorway);\n        res.redirect('/admin/shoes');\n\n    }\n\n\n    public async delShoe(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const shoeID = req.params[uString];\n        let PM = new ProductModel();\n        await PM.remove_shoe(shoeID);\n        res.redirect('/admin/shoes');\n\n\n    }\n\n\n}\n"]}
>>>>>>> bbdfc09265232636b1c30cf0b42472866f13c2ba
