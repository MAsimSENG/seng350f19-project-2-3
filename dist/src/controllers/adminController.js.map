{"version":3,"file":"adminController.js","sourceRoot":"","sources":["../../../src/controllers/adminController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,4CAA+C;AAC/C,yDAAwD;AAGxD,2CAA6C;AAE7C;IAAqC,mCAAS;IAA9C;;IAoDA,CAAC;IAlDiB,sBAAM,GAApB,UAAqB,MAAc;QAC/B,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,UAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;YACjE,IAAI,eAAe,EAAE,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QACvD,CAAC,CAAC,CAAC;QAGH,YAAY;QACZ,MAAM,CAAC,GAAG,CAAC,sBAAsB,EAAE,UAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;YAC/E,IAAI,eAAe,EAAE,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QACvD,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,IAAI,CAAC,sBAAsB,EAAE,UAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;YAChF,IAAI,eAAe,EAAE,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;IAGP,CAAC;IAED;;OAEG;IAEU,sCAAY,GAAzB,UAA0B,GAAY,EAAE,GAAa,EAAE,IAAkB;;;;;;wBACjE,OAAO,GAAU,EAAE,CAAC;wBACd,qBAAM,OAAO,CAAC,QAAQ,EAAE,EAAA;;wBAAlC,OAAO,GAAG,SAAwB,CAAC;wBACnC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;wBACrB,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,EAAC,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,WAAW,EAAC,CAAC,CAAC;;;;;KACxE;IAEY,sCAAY,GAAzB,UAA0B,GAAY,EAAE,GAAa,EAAE,IAAkB;;;;;;wBAC/D,OAAO,GAAG,IAAI,CAAC;wBACf,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC;wBACjD,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;wBACf,EAAE,GAAG,IAAI,6BAAa,EAAE,CAAC;wBAClB,qBAAM,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAA;;wBAAhC,IAAI,GAAG,SAAyB;wBACpC,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;wBACf,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;wBAC1B,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,UAAU,EAAE,EAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAC,CAAC,CAAC;;;;;KACvE;IAGY,kCAAQ,GAArB,UAAsB,GAAY,EAAE,GAAa,EAAE,IAAkB;;;gBAIjE,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;;;;KAC1B;IAIL,sBAAC;AAAD,CAAC,AApDD,CAAqC,kBAAS,GAoD7C;AApDY,0CAAe","sourcesContent":["import { NextFunction, Request, Response, Router} from \"express\";\nimport Helpers = require(\"../helperFunctions\");\nimport { CustomerModel } from \"../models/customerModel\";\nimport { NotificationModel } from \"../models/notificationModel\";\nimport { ProductModel } from \"../models/productModel\";\nimport { BaseRoute } from \"../routes/router\";\n\nexport class AdminController extends BaseRoute {\n\n    public static create(router: Router) {\n        router.get(\"/admin\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().showAllUsers(req, res, next);\n        });\n\n\n        // edit user\n        router.get(\"/admin/edit_user/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().editUserForm(req, res, next);\n        });\n\n        router.post(\"/admin/edit_user/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new AdminController().editUser(req, res, next);\n        });\n\n\n    }\n\n    /*\n    Shows all users in the db in a list.\n     */\n\n    public async showAllUsers(req: Request, res: Response, next: NextFunction) {\n        let userArr: any[] = [];\n        userArr = await Helpers.getUsers();\n        console.log(userArr);\n        this.render(req, res, \"admin\", {users: userArr, title: \"All users\"});\n    }\n\n    public async editUserForm(req: Request, res: Response, next: NextFunction) {\n        const uString = \"id\";\n        const userID = parseInt(req.params[uString], 10);\n        console.log(userID)\n        let CM = new CustomerModel();\n        let user = await CM.userInfo(userID);\n        user = user[0];\n        console.log(user.username)\n        this.render(req, res, \"editUser\", {user: user, title: \"Edit User\"});\n    }\n\n\n    public async editUser(req: Request, res: Response, next: NextFunction) {\n\n\n\n        res.redirect('/admin');\n    }\n\n\n\n}\n"]}