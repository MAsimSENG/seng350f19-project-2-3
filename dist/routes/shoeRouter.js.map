{"version":3,"file":"shoeRouter.js","sourceRoot":"","sources":["../../src/routes/shoeRouter.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,mCAAqC;AACrC,mDAA+C;AAE/C;IAAgC,8BAAS;IAAzC;;IA2GA,CAAC;IA1GiB,iBAAM,GAApB,UAAqB,MAAc;QAC/B,MAAM;QACN,OAAO,CAAC,GAAG,CAAC,gDAAgD,CAAC,CAAC;QAC9D,sBAAsB;QACvB,MAAM,CAAC,GAAG,CAAC,iBAAiB,EAAE,UAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;YACzE,IAAI,UAAU,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QACH,mBAAmB;QACnB,MAAM,CAAC,GAAG,CAAC,sBAAsB,EAAE,UAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;YAC/E,IAAI,UAAU,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,GAAG,CAAC,mBAAmB,EAAE,UAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;YAC5E,IAAI,UAAU,EAAE,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,GAAG,CAAC,oBAAoB,EAAE,UAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;YAC7E,IAAI,UAAU,EAAE,CAAC,aAAa,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;IAEP,CAAC;IAED,kBAAkB;IACd,oBAAoB;IACxB,IAAI;IAEG,iCAAY,GAAnB,UAAoB,GAAY,EAAE,GAAa,EAAE,IAAkB;QAC/D,IAAM,KAAK,GAAU,EAAE,CAAC;QACxB,oCAAoC;QACpC,uDAAuD;QACvD,MAAM;QACN,KAAK,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,aAAa,EAAjC,CAAiC,CAAC,CAAC;QACxD,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACnB,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,UAAU,EAAE,EAAC,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAC,CAAC,CAAC;IAErE,CAAC;IAEM,kCAAa,GAApB,UAAqB,GAAY,EAAE,GAAa,EAAE,IAAkB;QAChE,IAAM,KAAK,GAAU,EAAE,CAAC;QACxB,oCAAoC;QACpC,uDAAuD;QACvD,MAAM;QACN,KAAK,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,aAAa,EAAjC,CAAiC,CAAC,CAAC;QACxD,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACnB,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,UAAU,EAAE,EAAC,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAC,CAAC,CAAC;IAErE,CAAC;IAID;;OAEG;IACU,2BAAM,GAAnB,UAAoB,GAAY,EAAE,GAAa,EAAE,IAAkB;;;;;;wBAC/D,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAA;wBACtB,QAAQ,GAAG,IAAI,CAAC;wBAChB,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC,CAAC;wBAC9C,IAAI,GAAG,IAAI,sBAAS,EAAE,CAAC;wBACf,qBAAM,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAA;;wBAAlC,KAAK,GAAG,SAA0B;wBACxC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;wBACnB,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;4BACpB,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;yBACnB;6BAAM;4BACH,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;yBACjC;;;;;KAIR;IAED;;OAEG;IACI,2BAAM,GAAb,UAAc,GAAY,EAAE,GAAa,EAAE,IAAkB;QACzD,yBAAyB;QACzB,uDAAuD;QACvD,+BAA+B;QAC/B,2BAA2B;QAC3B,8BAA8B;QAC9B,wCAAwC;QACxC,oDAAoD;QACpD,wCAAwC;QACxC,qCAAqC;QACrC,eAAe;QACf,QAAQ;QACR,IAAI;QACJ,cAAc;QACd,2BAA2B;QAC3B,2DAA2D;QAC3D,8CAA8C;QAC9C,yBAAyB;QACzB,kBAAkB;QAClB,kCAAkC;QAClC,kCAAkC;QAClC,mBAAmB;QACnB,iBAAiB;QACjB,WAAW;QACX,sBAAsB;QACtB,kBAAkB;QAClB,2DAA2D;QAC3D,kCAAkC;QAClC,cAAc;QACd,IAAI;IAER,CAAC;IAEL,iBAAC;AAAD,CAAC,AA3GD,CAAgC,kBAAS,GA2GxC;AA3GY,gCAAU","sourcesContent":["import { NextFunction, Request, Response, Router} from \"express\";\n// import Shoes = require(\"../../dist/data.json\");\nimport DbClient = require(\"../DbClient\");\nimport { UserModel } from \"../models/user_model\";\nimport { BaseRoute } from \"./router\";\nimport {ShoeModel} from \"../models/shoe_model\";\n\nexport class ShoeRouter extends BaseRoute {\n    public static create(router: Router) {\n        // log\n        console.log(\"[ShoeRoute::create] Creating ShoeRoutes route.\");\n        // add home page route\n       router.get(\"/user/:id/shoes\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().getAll(req, res, next);\n        });\n        // add getOne route\n        router.get(\"/user/:id/shoes/:id2\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().getOne(req, res, next);\n        });\n\n        router.get(\"/api/sortpricelow\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().sortPriceLow(req, res, next);\n        });\n\n        router.get(\"/api/sortpricehigh\", (req: Request, res: Response, next: NextFunction) => {\n            new ShoeRouter().sortPriceHigh(req, res, next);\n        });\n\n    }\n\n    // constructor() {\n        // not much here yet\n    // }\n\n    public sortPriceLow(req: Request, res: Response, next: NextFunction) {\n        const shoes: any[] = [];\n        // Shoes.forEach((element: any) => {\n        //     shoes.push(JSON.parse(JSON.stringify(element)));\n        // });\n        shoes.sort((a, b) => a.current_price - b.current_price);\n        console.log(shoes);\n        this.render(req, res, \"allShoes\", {title: \"Shoes\", data: shoes});\n\n    }\n\n    public sortPriceHigh(req: Request, res: Response, next: NextFunction) {\n        const shoes: any[] = [];\n        // Shoes.forEach((element: any) => {\n        //     shoes.push(JSON.parse(JSON.stringify(element)));\n        // });\n        shoes.sort((a, b) => b.current_price - a.current_price);\n        console.log(shoes);\n        this.render(req, res, \"allShoes\", {title: \"Shoes\", data: shoes});\n\n    }\n\n\n\n    /**\n     * GET all Shoes. Take user id from the url parameter. Then get all shoes for that user.\n     */\n    public async getAll(req: Request, res: Response, next: NextFunction) {\n        console.log(\"in ther other one\")\n            const idString = \"id\";\n            const queryint = parseInt(req.params[idString], 10);\n            const yeet = new ShoeModel();\n            const shoes = await yeet.get_one_shoe(2);\n            console.log(shoes);\n            if (shoes.length !== 0) {\n                res.send(shoes);\n            } else {\n                res.send(\"404 not found lol\");\n            }\n\n\n\n    }\n\n    /**\n     * GET one shoe by id\n     */\n    public getOne(req: Request, res: Response, next: NextFunction) {\n        // const idString = \"id\";\n        // const queryint = parseInt(req.params[idString], 10);\n        // // let shoe: any = Shoes[1];\n        // const shoe: any = Shoes;\n        // for (const item in Shoes) {\n        //     if (Shoes.hasOwnProperty(item)) {\n        //         // const shoeid: number = Shoes[item].id;\n        //         // if (shoeid === queryint) {\n        //             // shoe = Shoes[item];\n        //         // }\n        //     }\n        // }\n        // if (shoe) {\n        //     const diff = \"diff\";\n        //     shoe[diff] = shoe.current_price - shoe.retail_price;\n        //     this.render(req, res, \"oneShoe\", shoe);\n        //     /* res.status(200)\n        //         .send({\n        //             message: 'Success',\n        //             status: res.status,\n        //             shoe\n        //         }); */\n        // } else {\n        //     res.status(404)\n        //         .send({\n        //             message: \"No shoe found with the given id.\",\n        //             status: res.status,\n        //         });\n        // }\n\n    }\n\n}\n"]}