{"version":3,"file":"heroRouter.js","sourceRoot":"","sources":["../../src/routes/heroRouter.ts"],"names":[],"mappings":"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","sourcesContent":["import {Router, Request, Response, NextFunction} from 'express';\nimport DbClient = require(\"../DbClient\");\nimport { BaseRoute } from \"./router\";\n//import DbClient from '../DbClient'\nconst Heroes = require('../../dist/data.json');\nexport class HeroRouter extends BaseRoute {\n    public static create(router: Router) {\n        //log\n        console.log(\"[HeroRoute::create] Creating HeroRoutes route.\");\n\n        //add home page route\n        router.get(\"/api/shoes\", (req: Request, res: Response, next: NextFunction) => {\n            new HeroRouter().getAll(req, res, next);\n        });\n\n        // add getOne route\n        router.get(\"/api/shoes/:id\", (req: Request, res: Response, next: NextFunction) => {\n            new HeroRouter().getOne(req, res, next);\n        });\n\n        router.get(\"/api/sortpricelow\", (req: Request, res: Response, next: NextFunction) => {\n            new HeroRouter().sortPriceLow(req, res, next);\n        });\n\n        router.get(\"/api/sortpricehigh\", (req: Request, res: Response, next: NextFunction) => {\n            new HeroRouter().sortPriceHigh(req, res, next);\n        });\n\n        //router.get(\"/api/heroes/\")\n    }\n\n    //constructor() {\n        // not much here yet\n    //}\n\n    public sortPriceLow (req: Request, res: Response, next: NextFunction){\n        let shoes: any[] = [];\n        Heroes.forEach((element:any) => {shoes.push(JSON.parse(JSON.stringify(element)))});\n        shoes.sort((a, b) => a.current_price - b.current_price)\n        console.log(shoes);\n        this.render(req, res, \"allShoes\", {title: \"Shoes\", data: shoes});\n\n    }\n\n    public sortPriceHigh (req: Request, res: Response, next: NextFunction){\n        let shoes: any[] = [];\n        Heroes.forEach((element:any) => {shoes.push(JSON.parse(JSON.stringify(element)))});\n        shoes.sort((a, b) => b.current_price - a.current_price)\n        console.log(shoes);\n        this.render(req, res, \"allShoes\", {title: \"Shoes\", data: shoes});\n\n    }\n\n    /**\n     * GET all Heroes.\n     */\n    public getAll(req: Request, res: Response, next: NextFunction) {\n        /* DbClient.connect()\n            .then((db) => {\n                return db!.collection(\"sneakers\").find().toArray();\n            })\n            .then((sneakers:any) => {\n                console.log(sneakers);\n                res.send(sneakers);\n            })\n            .catch((err) => {\n                console.log(\"err.message\");\n            }) */\n            //res.send(Heroes);\n            let hero_array: any[] = [];\n            Heroes.forEach((element:any) => {hero_array.push(JSON.parse(JSON.stringify(element)))});\n            console.log(hero_array);\n            this.render(req, res, \"allShoes\", {title: \"Shoes\", data: hero_array});\n    }\n\n    /**\n     * GET one hero by id\n     */\n    public getOne(req: Request, res: Response, next: NextFunction) {\n        let query = parseInt(req.params.id);\n        let hero = Heroes.find((hero:any) => hero.id === query);\n        if (hero) {\n            hero[\"diff\"] = hero.current_price - hero.retail_price;\n            this.render(req, res, \"oneShoe\", hero);\n            /* res.status(200)\n                .send({\n                    message: 'Success',\n                    status: res.status,\n                    hero\n                }); */\n        }\n        else {\n            res.status(404)\n                .send({\n                    message: 'No hero found with the given id.',\n                    status: res.status\n                });\n        }\n\n\n    }\n\n\n}"]}